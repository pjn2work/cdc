<!DOCTYPE html>
<html lang="pt">
<head>
    <title>CdC - Lista Membros/Quotas</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/cdc.css">
</head>
<body>

    <div class="container">

        <table class="full_width">
            <tr>
                <td>
                    <h1 class="my-4">Lista de membros e quotas</h1>
                </td>
                <td class="align_right">
                    <a href="../"><img src="/cdc_logo.jpg" style="float:right;width:15%;height:15%;" alt="Casa do Caminho"></a>
                </td>
            </tr>
        </table>

        <div class="card">
            <div class="card-body">

                <table>
                    <tr>
                        <td style="width: 30%">

                            <form method="get" action="pivot_table">
                                <input class="hidden" type="checkbox" id="do_filter" name="do_filter" checked>
                                <table>
                                    <tr>
                                        <td class="padding-5"><label class="form-check-label" for="since">Filtrar por data desde</label></td>
                                        <td class="padding-5"><input class="form-text" type="month" size="10" id="since" name="since" placeholder="2024-01" value="{{ since }}"></td>
                                    </tr><tr>
                                        <td class="padding-5"><label class="form-check-label" for="until">Filtrar por data até</label></td>
                                        <td class="padding-5"><input class="form-text" type="month" size="10" id="until" name="until" placeholder="2024-12" value="{{ until }}"></td>
                                    </tr><tr>
                                        <td class="padding-5"><label class="form-check-label" for="just_download">Download de ficheiro</label></td>
                                        <td class="padding-5"><input class="form-check-input" type="checkbox" id="just_download" name="just_download"></td>
                                    </tr><tr>
                                        <td class="padding-5"><button class="btn btn-primary mb-2" type="submit">Filtrar por datas</button></td>
                                    </tr>
                                </table>
                            </form>

                        </td>
                    </tr>
                </table>

            </div>
        </div>

    </div>

    <br>
    <h3>Quotas pagas</h3>
    <table class="table table-striped table-bordered">
        <thead class="table-dark">
            <tr>
                <th class="align_right">ID</th>
                <th class="align_right">Nome</th>
                <th class="align_right">Total</th>
                {% for col in columns %}
                    <th class="align_right">{{ col }}</th>
                {%  endfor %}
            </tr>
        </thead>
        <tbody>
            {% for row in df_paied %}
                <tr>
                    <td class="align_right"><a href="../members/{{ row["member_id"] }}/show">{{ row["member_id"] }}</a></td>
                    <td class="align_left">{{ row["name"] }}</td>
                    <td class="align_right">{{ row["total"] }} €</td>
                    {% for col in columns %}
                        <td class="align_right">{{ row[col] }} €</td>
                    {%  endfor %}
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <br>
    <h3>Quotas em atraso</h3>
    <table class="table table-striped table-bordered">
        <thead class="table-light">
            <tr>
                <th class="align_right">ID</th>
                <th class="align_right">Nome</th>
                <th class="align_right">Total</th>
                {% for col in columns %}
                    <th class="align_right">{{ col }}</th>
                {%  endfor %}
            </tr>
        </thead>
        <tbody>
            {% for row in df_missing %}
                <tr>
                    <td class="align_right"><a href="../members/{{ row["member_id"] }}/show">{{ row["member_id"] }}</a></td>
                    <td class="align_left">{{ row["name"] }}</td>
                    <td class="align_right">{{ row["total"] }} €</td>
                    {% for col in columns %}
                        <td class="align_right">{{ row[col] }} €</td>
                    {%  endfor %}
                </tr>
            {% endfor %}
        </tbody>
    </table>

</body>
</html>